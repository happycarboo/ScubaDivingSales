# Scuba Diving Sales Assistant App UML Diagram

## System Architecture - Class Diagram

```
+------------------+      +---------------------+     +------------------------+
|   FRONTEND       |      |     API LAYER       |     |    DATABASE            |
| (React Native)   |      |    (Services)       |     |    (Firebase)          |
+------------------+      +---------------------+     +------------------------+
         |                         |                             |
         |                         |                             |
         v                         v                             v
+-----------------------------------------------------------------------------------------------------------+
|                                           DESIGN PATTERNS                                                  |
+-----------------------------------------------------------------------------------------------------------+
|                                                                                                           |
|  +------------------+          +------------------+          +------------------+                         |
|  |  Factory Pattern  |          |  Facade Pattern   |          |  Visitor Pattern  |                         |
|  +------------------+          +------------------+          +------------------+                         |
|  | ProductFactory    |          | ServiceFacade     |          | PriceCalculator   |                         |
|  | - createProduct() |<---------| - getInstance()   |--------->| - visitRegulator()|                         |
|  |                  |          | - fetchProducts() |          | - visitBCD()      |                         |
|  |                  |          | - getPrices()     |          | - visitFin()      |                         |
|  +------------------+          +------------------+          +------------------+                         |
|         ^                             ^                              ^                                    |
|         |                             |                              |                                    |
+---------|-----------------------------|------------------------------|------------------------------------|
          |                             |                              |
          |                             |                              |
          v                             v                              v
+-------------------------------------------------------------------------------------------------------------------+
|                                             PRODUCT DOMAIN                                                         |
+-------------------------------------------------------------------------------------------------------------------+
|                                                                                                                   |
|       +-------------------+                    +-------------------+                   +-------------------+       |
|       |  <<interface>>    |                    |   RegulatorProduct |                   |    BCDProduct     |       |
|       |     Product       |                    +-------------------+                   +-------------------+       |
|       +-------------------+                    | - id: string       |                   | - id: string       |       |
|       | + id: string      |<-------------+     | - name: string     |                   | - name: string     |       |
|       | + name: string    |              |     | - brand: string    |                   | - brand: string    |       |
|       | + brand: string   |              |     | - price: number    |                   | - price: number    |       |
|       | + price: number   |              |     | - specs: Record    |                   | - specs: Record    |       |
|       | + specifications  |              |     | + getDescription() |                   | + getDescription() |       |
|       | + getDescription()|              |     +-------------------+                   +-------------------+       |
|       +-------------------+              |                                                                         |
|               ^                          |     +-------------------+                                               |
|               |                          +-----+    FinProduct     |                                               |
|               |                                +-------------------+                                               |
|               |                                | - id: string       |                                               |
|               |                                | - name: string     |                                               |
|               |                                | - brand: string    |                                               |
|               |                                | - price: number    |                                               |
|               |                                | - specs: Record    |                                               |
|               |                                | + getDescription() |                                               |
|               |                                +-------------------+                                               |
|               |                                                                                                   |
+-------------------------------------------------------------------------------------------------------------------+
                |
                |
                v
+--------------------------------------------------------------------------------------------------------------------------+
|                                              SERVICE MODULES                                                              |
+--------------------------------------------------------------------------------------------------------------------------+
|                                                                                                                          |
|  +---------------------+      +------------------------+      +---------------------------+     +---------------------------+  |
|  |  FirebaseService    |      |  PriceScraperService   |      |  ComprehensiveStrategy   |     |  ProductImageService      |  |
|  +---------------------+      +------------------------+      +---------------------------+     +---------------------------+  |
|  | - getInstance()     |      | - fetchCompetitorPrices|      | - extractProductName     |     | - getProductImageUrl      |  |
|  | - initialize()      |      | - getLastFetchedPrices |      | - extractProductImageUrl |     | - getProductImageUri      |  |
|  | - fetchProducts()   |      | - getInstance()        |      | - extractProductInfo     |     | - prefetchProductImages   |  |
|  +---------------------+      +------------------------+      +---------------------------+     +---------------------------+  |
|           ^                             ^                               ^                                ^                  |
|           |                             |                               |                                |                  |
|           |                             |                               |                                |                  |
|  +---------------------+      +------------------------+      +---------------------------+     +---------------------------+  |
|  | IFirebaseService    |      | IPriceScraperService   |      | IProductInfoExtractor     |     | IProductImageService      |  |
|  | <<interface>>       |      | <<interface>>           |      | <<interface>>             |     | <<interface>>             |  |
|  | +---------------------+      +------------------------+      +---------------------------+     +---------------------------+  |
|                                                                                                                          |
+--------------------------------------------------------------------------------------------------------------------------+
                                                        |
                                                        |
                                                        v
+--------------------------------------------------------------------------------------------------------------------------+
|                                               SCREENS                                                                     |
+--------------------------------------------------------------------------------------------------------------------------+
|                                                                                                                          |
|  +---------------------+      +------------------------+      +---------------------------+                              |
|  | ProductSelection    |      | ProductDetails         |      | Comparison                |                              |
|  +---------------------+      +------------------------+      +---------------------------+                              |
|  | - useEffect()       |      | - useEffect()          |      | - useEffect()             |                              |
|  | - render()          |      | - render()             |      | - render()                |                              |
|  +---------------------+      +------------------------+      +---------------------------+                              |
|                                                                                                                          |
+--------------------------------------------------------------------------------------------------------------------------+
```

## Component Diagram

```
                          +---------------------+
                          |     App.tsx         |
                          |  (Entry Point)      |
                          +---------------------+
                                    |
                                    |
              +-------------------------------------------+
              |                     |                     |
              v                     v                     v
+-------------------------+ +----------------+ +----------------------+
| ProductSelectionScreen  | | ProductDetails | | ComparisonScreen     |
+-------------------------+ +----------------+ +----------------------+
        |         |               |                   |
        |         |               |                   |
        v         v               v                   v
+-------------+ +-----------+ +-------------+ +----------------+
| ProductCard | | Filter    | | TechSpecs   | | PriceComparison|
+-------------+ | Component | +-------------+ +----------------+
                +-----------+        |               |
                                     |               |
                                     v               v
                              +--------------+ +----------------+
                              | FirebaseRepo | | PriceScraper   |
                              +--------------+ +----------------+
                                     |               |
                                     v               v
                              +--------------+ +----------------+
                              | Firestore DB | | External Sites |
                              +--------------+ +----------------+
```

## Sequence Diagram - Product Selection to Comparison Flow

```
+----------------+  +-------------------+  +---------------+  +---------------+  +----------------+
| User           |  | ProductSelection  |  | ServiceFacade |  | FirebaseRepo  |  | Comparison     |
+----------------+  +-------------------+  +---------------+  +---------------+  +----------------+
        |                   |                    |                  |                   |
        | Select Filters    |                    |                  |                   |
        |------------------>|                    |                  |                   |
        |                   | getProductsWithFilters               |                   |
        |                   |------------------->|                  |                   |
        |                   |                    | getProductsByType|                   |
        |                   |                    |----------------->|                   |
        |                   |                    |                  |                   |
        |                   |                    |<-----------------|                   |
        |                   |<-------------------|                  |                   |
        |                   |                    |                  |                   |
        | Select Products   |                    |                  |                   |
        | for Comparison    |                    |                  |                   |
        |------------------>|                    |                  |                   |
        |                   | Navigate to Comparison               |                   |
        |                   |--------------------------------------------------------->|
        |                   |                    |                  |                   |
        |                   |                    |                  |                   |
        |                   |                    | fetchCompetitorPrices                |
        |                   |                    |<------------------------------------|
        |                   |                    |                  |                   |
        |                   |                    |---------------------------------------->|
        |                   |                    |                  |                   | External
        |                   |                    |<----------------------------------------|Price Scraping
        |                   |                    |                  |                   |
        |                   |                    |------------------------------------>|
        |                   |                    |                  |                   |
        | View Comparison   |                    |                  |                   |
        |<---------------------------------------------------------------------------------|
        |                   |                    |                  |                   |
```

## State Diagram - Price Scraping Process

```
                         +-------------------+
                         |     INITIAL       |
                         +-------------------+
                                  |
                                  v
                         +-------------------+
                         |  CHECK_CACHE      |
                         +-------------------+
                                  |
                         +--------+--------+
                         |                 |
                         v                 v
           +-------------------+   +-------------------+
           | CACHE_AVAILABLE   |   | CACHE_UNAVAILABLE |
           +-------------------+   +-------------------+
                    |                       |
                    |                       v
                    |              +-------------------+
                    |              |  FETCH_PRICES     |
                    |              +-------------------+
                    |                       |
                    |          +------------+------------+
                    |          |                         |
                    |          v                         v
                    |  +-------------------+   +-------------------+
                    |  |  FETCH_SUCCESS    |   |  FETCH_ERROR      |
                    |  +-------------------+   +-------------------+
                    |          |                         |
                    |          v                         |
                    |  +-------------------+             |
                    |  |  UPDATE_CACHE     |             |
                    |  +-------------------+             |
                    |          |                         |
                    +----------+-------------------------+
                                |
                                v
                     +-------------------+
                     |  DISPLAY_PRICES   |
                     +-------------------+
```

## Package Diagram

```
+-----------------------------------------------------+
|                  ScubaDivingApp                     |
+-----------------------------------------------------+
|                                                     |
|  +---------------+       +--------------------+     |
|  |     src       |------>|      components    |     |
|  +---------------+       +--------------------+     |
|        |                        |                   |
|        |                 +------+------+            |
|        |                 |             |            |
|        v                 v             v            |
|  +---------------+  +----------+  +-----------+     |
|  |    screens    |  |  common  |  |  product  |     |
|  +---------------+  +----------+  +-----------+     |
|        |                                            |
|        v                                            |
|  +---------------+                                  |
|  |   services    |                                  |
|  +---------------+                                  |
|        |                                            |
|   +----+------+                                     |
|   |           |                                     |
|   v           v                                     |
|+--------+ +--------+                                |
|| firebase| | scraper|                               |
|+--------+ +--------+                                |
|   |           |                                     |
|   v           v                                     |
|+--------+ +--------+                                |
|| repos  | |strategy|                                |
|+--------+ +--------+                                |
|                                                     |
|  +---------------+                                  |
|  |   patterns    |                                  |
|  +---------------+                                  |
|        |                                            |
|  +-----+------+                                     |
|  |     |      |                                     |
|  v     v      v                                     |
|+------+ +-----+ +-------+                           |
||factory| |facade| |visitor|                         |
|+------+ +-----+ +-------+                           |
|                                                     |
+-----------------------------------------------------+
``` 